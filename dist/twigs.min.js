"use strict";angular.module("twigs.menu",[]),angular.module("twigs.activeRoute",[]),angular.module("twigs.devel",["ngCookies"]),angular.module("twigs.dynamicSize",[]),angular.module("twigs.flow",[]),angular.module("twigs.templates",[]),angular.module("twigs.choose",["ui.select2","twigs.templates"]),angular.module("twigs.globalHotkeys",[]),angular.module("twigs.security",[]),angular.module("twigs.sortable",[]),angular.module("twigs.tableRowClick",["twigs.security"]),angular.module("twigs.globalPopups",["ui.bootstrap.modal","twigs.templates"]),angular.module("twigs.protectedRoutes",["twigs.security","ngRoute"]),angular.module("twigs",["twigs.menu","twigs.activeRoute","twigs.devel","twigs.choose","twigs.flow","twigs.globalHotkeys","twigs.security","twigs.sortable","twigs.dynamicSize","twigs.tableRowClick","twigs.globalPopups","twigs.protectedRoutes"]),angular.module("twigs.activeRoute").directive("twgActiveRoute",["$location","$parse",function(a,b){return{restrict:"AC",scope:!0,link:function(c,d,e){function f(b){(i=function(){var e,f;e=new RegExp("^"+b+"$",["i"]),f=e.test(a.path()),h(c,f),f?d.addClass(g):d.removeClass(g)})()}var g="active",h=b("twgActive").assign,i=angular.noop;c.twgActive=!1,angular.isUndefined(e.twgActiveRoute)?c.$watch(e.twgActiveRoute,function(){f(e.twgActiveRoute)}):f(e.twgActiveRoute),c.$on("$routeChangeSuccess",function(){i()})}}}]),angular.module("twigs.choose").service("ChooseConfig",function(){function a(a){c=a}function b(){return c}var c="No results";return{setNoResultMessage:a,getNoResultMessage:b}}).service("ChooseHelper",["ChooseConfig",function(a){function b(a){if(!angular.isUndefined(a)){if(!angular.isArray(a))throw"With multiple selection, model is expected to be an array!";if(!(a.length<1)){var b=[];return a.forEach(function(a){b.push(angular.isDefined(a.id)?a.id:a)}),b}}}function c(a){return angular.isUndefined(a)?a:angular.isDefined(a.id)?a.id:a}function d(a){if(!angular.isArray(a))throw"With multiple selection, intern model is expected to be an array!";var b=[];return a.forEach(function(a){b.push({id:f(a)})}),b}function e(a){return{id:f(a)}}function f(a){return"number"==typeof a?a:parseInt(a,10)}function g(a,b){return angular.isUndefined(b)||""===b||angular.isUndefined(a[b])?a:a[b]}function h(b){var c;return c=angular.isDefined(b)&&b.length>0?b:a.getNoResultMessage(),{formatNoMatches:function(){return c}}}return{convertExternToInternMultiple:b,convertExternToInternSingle:c,convertInternToExternMultiple:d,convertInternToExternSingle:e,getChoiceLabel:g,getDefaultSelect2Options:h}}]).directive("twgChooseSingle",["ChooseHelper",function(a){return{templateUrl:"templates/chooseSingle.html",replace:!0,restrict:"E",require:"?ngModel",scope:{choices:"=",ngModel:"=",choiceDisplayname:"@",noResultMessage:"@"},link:function(b,c,d,e){e.$formatters.push(function(b){return a.convertExternToInternSingle(b)}),e.$parsers.push(function(b){return a.convertInternToExternSingle(b)}),b.getLabel=function(c){return a.getChoiceLabel(c,b.choiceDisplayname)},b.select2Options=a.getDefaultSelect2Options(b.noResultMessage)}}}]).directive("twgChooseMultiple",["ChooseHelper",function(a){return{templateUrl:"templates/chooseMultiple.html",replace:!0,restrict:"E",require:"?ngModel",scope:{choices:"=",ngModel:"=",choiceDisplayname:"@",noResultMessage:"@"},link:function(b,c,d,e){e.$formatters.push(function(b){return a.convertExternToInternMultiple(b)}),e.$parsers.push(function(b){return a.convertInternToExternMultiple(b)}),b.getLabel=function(c){return a.getChoiceLabel(c,b.choiceDisplayname)},b.select2Options=a.getDefaultSelect2Options(b.noResultMessage)}}}]),angular.module("twigs.devel").constant("ERROR_REPORTED_EVENT","twigs.devel.errorReported").constant("SERVER_REQUEST_REPORTED_EVENT","twigs.devel.serverRequestReported").provider("DevelopmentInfoService",function(){var a=/.*/;this.setUrlFilterPattern=function(b){a=b},this.$get=["$rootScope","ERROR_REPORTED_EVENT","SERVER_REQUEST_REPORTED_EVENT",function(b,c,d){function e(){return l}function f(a,b){l[a]=b}function g(a,d){j.push({name:a,payload:d,date:new Date}),b.$broadcast(c,j)}function h(a,c,e){k.push({url:a,response:c,status:e,showResponse:!1,date:new Date}),b.$broadcast(d,k)}function i(){return a}var j=[],k=[],l={},m={reportError:g,reportServerRequest:h,getUrlFilterPattern:i,getCustomData:e,watchCustomData:f};return m}]}).controller("DevelopmentInfoCtrl",["$rootScope","$scope","$cookieStore","$location","DevelopmentInfoService","ERROR_REPORTED_EVENT","SERVER_REQUEST_REPORTED_EVENT",function(a,b,c,d,e,f,g){var h="twg.develFooterEnabled";"true"===d.search().develFooter?(b.develFooterEnabled=!0,c.put(h,!0)):"false"===d.search().develFooter?(b.develFooterEnabled=!1,c.put(h,!1)):b.develFooterEnabled=c.get(h),b.customData={},a.$watch(function(){return e.getCustomData()},function(a){b.customData=a},!0),b.$on(f,function(a,c){b.errors=c}),b.$on(g,function(a,c){b.serverRequests=c})}]).config(["$httpProvider",function(a){function b(a,b){function c(a){return f.test(a)}function d(a){return c(a.config.url)&&b.reportServerRequest(a.config.url,a.data,a.status),a}function e(d){return c(d.config.url)&&b.reportServerRequest(d.config.url,d.data,d.status),a.reject(d)}var f=b.getUrlFilterPattern();return function(a){return a.then(d,e)}}a.responseInterceptors.push(["$q","DevelopmentInfoService",b])}]),angular.module("twigs.dynamicSize").service("DynamicSizeHelper",function(){function a(a){return!isNaN(parseInt(a,10))&&isFinite(a)}function b(b){if(0===b.length)throw"Please specify a dynamic size attribute!";if(!a(b))throw"Dynamic size attribute must be numeric!";if(b%1!==0)throw"Dynamic size attribute must be a whole number!";return parseInt(b,10)}return{parseDynamicSizeAttribute:b}}).directive("twgDynamicHeight",["$window","DynamicSizeHelper",function(a,b){return{restrict:"A",scope:{twgDynamicHeight:"="},link:function(c,d){function e(){d.css("height",g+f.height())}var f=angular.element(a),g=b.parseDynamicSizeAttribute(c.twgDynamicHeight);f.resize(function(){e()}),e()}}}]).directive("twgDynamicWidth",["$window","DynamicSizeHelper",function(a,b){return{restrict:"A",scope:{twgDynamicWidth:"="},link:function(c,d){function e(){d.css("width",g+f.width())}var f=angular.element(a),g=b.parseDynamicSizeAttribute(c.twgDynamicWidth);f.resize(function(){e()}),e()}}}]),angular.module("twigs.flow").provider("Flow",function(){function a(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}function b(a,b){if(angular.isDefined(a.steps[b])){var c='a step with id "'+b;throw c+='" is already configured in flow "'+a.id+'"'}}function c(a){if(angular.isUndefined(a.id))throw"step must have an id";if(angular.isUndefined(a.route))throw"step must have a route"}this.flows={},this.$get=["$location","$log",function(a,b){function c(a){b.debug("looking for step with route ",a);var c;if(angular.forEach(g,function(b,e){angular.forEach(g[e].steps,function(b){d(b.routeRegex,a)&&(c={flow:g[e],step:b})})}),angular.isUndefined(c))throw"no flow-step found for route "+a;return c}function d(a,b){if(angular.isUndefined(a.test))throw"Expected regex, but got "+a;return a.test(b)}function e(a,b){var c=g[b];if(!angular.isUndefined(c.steps[a]))return c.steps[a];throw"no step with id"}function f(a,b){var c=!1;if(angular.forEach(a,function(a){a===b&&(c=!0)}),c!==!0)throw"transition to step "+b+" is not allowed!"}var g=this.flows,h={currentFlowId:void 0,currentFlowModel:{},getModel:function(){return this.currentFlowModel},next:function(){var b,d,f=c(a.path());if(this.currentFlowId=f.flow.id,b=f.step.transitions.next,angular.isUndefined(b))throw"step does not define a transition 'next'";d=e(b,this.currentFlowId),a.path(d.route)},previous:function(){var b,d,f=c(a.path());if(this.currentFlowId=f.flow.id,b=f.step.transitions.previous,angular.isUndefined(b))throw"step does not define a transition 'previous'";d=e(b,this.currentFlowId),a.path(d.route)},toStep:function(b){var d,g=c(a.path());this.currentFlowId=g.flow.id,f(g.step.transitions,b),d=e(b,this.currentFlowId),a.path(d.route)},isCurrentStep:function(b){var f,g,h=a.path();if(f=c(h),angular.isUndefined(f))throw"no flow found for path "+h;return g=e(b,f.flow.id),d(g.routeRegex,h)},finish:function(){this.currentFlowId=void 0,this.currentFlowModel=void 0}};return h}],this.flow=function(a){if(!angular.isUndefined(this.currentFlowId))throw"flow configuration error! use '$flowProvider.createFlow()' to complete previous flow";return this.currentFlowId=a,this.flows[a]={id:a,steps:{}},this},this.step=function(d){if(angular.isUndefined(this.currentFlowId))throw"flow configuration error! use '$flowProvider.flow('myFlow').step(...)";c(d);var e=this.flows[this.currentFlowId];return b(e,d.id),d.routeRegex=a(d.route,{}).regexp,e.steps[d.id]=d,this},this.createFlow=function(){this.currentFlowId=void 0}}),angular.module("twigs.globalHotkeys").factory("GlobalHotkeysService",["$location",function(a){function b(a,b){var c=o[a];return angular.isUndefined(c)?void 0:c[b.toLowerCase()]}function c(a,b){var c=o[a];return angular.isUndefined(c)?void 0:c[n+b]}function d(a){return p[a.toLowerCase()]}function e(a){return p[n+a]}function f(b,c){var d=a.path(),e=o[d];angular.isUndefined(e)&&(e={},o[d]=e),e[b.toLowerCase()]=c}function g(b,c){var d=a.path(),e=o[d];angular.isUndefined(e)&&(e={},o[d]=e),e[n+b]=c}function h(a,b){angular.forEach(a,function(a){f(a,b)})}function i(a,b){angular.forEach(a,function(a){g(a,b)})}function j(a,b){p[a.toLowerCase()]=b}function k(a,b){angular.forEach(a,function(a){j(a,b)})}function l(a,b){p[n+a]=b}function m(a,b){angular.forEach(a,function(a){l(a,b)})}var n="c_",o={},p={},q={getPageHotkeyAction:b,getPageHotkeyActionCode:c,getGlobalHotkeyAction:d,getGlobalHotkeyActionCode:e,registerPageHotkey:f,registerPageHotkeyCode:g,registerPageHotkeys:h,registerPageHotkeyCodes:i,registerGlobalHotkey:j,registerGlobalHotkeys:k,registerGlobalHotkeyCode:l,registerGlobalHotkeyCodes:m};return q}]).directive("twgGlobalHotkeys",["$location","$rootScope","GlobalHotkeysService",function(a,b,c){return{restrict:"A",link:function(b,d){function e(a){switch(j(a).tagName.toLowerCase()){case"a":case"button":case"input":case"select":case"textarea":return!0;default:return!1}}function f(d,e){var f=i(d,String.fromCharCode(e.which)),g=c.getPageHotkeyAction(a.path(),f);if(angular.isDefined(g))return g(e),b.$apply(),!0;var h=c.getGlobalHotkeyAction(f);return angular.isDefined(h)?(h(e),b.$apply(),!0):!1}function g(d,e){var f=i(d,e.which),g=c.getPageHotkeyActionCode(a.path(),f);if(angular.isDefined(g))return g(e),b.$apply(),!0;var h=c.getGlobalHotkeyActionCode(f);return angular.isDefined(h)?(h(e),b.$apply(),!0):!1}function h(a){var b="";a.ctrlKey&&(b=i(b,"ctrl")),a.altKey&&(b=i(b,"alt")),a.shiftKey&&(b=i(b,"shift"));var c=f(b,a);c||g(b,a)}d.bind("keydown",function(a){e(a)||h(a)});var i=function(a,b){var c=a;return a.length>0&&(c+="+"),c+=b},j=function(a){var b;return a||(a=window.event),a.target?b=a.target:a.srcElement&&(b=a.srcElement),3===b.nodeType&&(b=b.parentNode),b}}}}]),angular.module("twigs.globalPopups").provider("GlobalPopups",function(){var a={};this.modals={},this.toasts={},this.fileModals={},this.$get=["$rootScope","$modal","$timeout","$templateCache","$http","$compile","$document","$sce",function(b,c,d,e,f,g,h,i){var j,k=function(a,b,d,e,f){var g=a.options.modalOptions;return g.controller=m,g.resolve={messageText:function(){return b},title:function(){return d},primaryButtonText:function(){return e},secondaryButtonText:function(){return f}},c.open(g).result},l=function(a,b,d,e){var f=a.options.modalOptions;return f.controller=n,f.resolve={messageText:function(){return i.trustAsResourceUrl(b)},title:function(){return d},backButtonText:function(){return e}},c.open(f).result},m=function(a,b,c,d,e,f){a.message=c,a.title=d,a.primaryButtonText=e,a.secondaryButtonText=f,a.ok=function(){b.close()},a.cancel=function(){b.dismiss()}},n=function(a,b,c,d,e){a.message=c,a.title=d,a.backButtonText=e,a.ok=function(){b.close()},a.cancel=function(){b.dismiss()}};j={};var o=function(a,c){p(a.options.templateUrl).then(function(e){var f=h.find("body"),i=b.$new(!0),k=h.find("#twigs-toast");k.length<1&&(k=angular.element('<div id="twigs-toast"></div>'),f.append(k));var l=g(e)(i);i.id=(new Date).getTime(),j[i.id]=l,k.append(l),i.message=c,i.close=function(){angular.isDefined(j[i.id])&&(j[i.id].remove(),delete j[i.id])},angular.isDefined(a.options.displayDuration)&&d(function(){i.close()},a.options.displayDuration)})},p=function(a){return f.get(a,{cache:e}).then(function(a){return a.data})};return a.displayModal=k,a.displayToast=o,a.displayFileModal=l,a}],this.createModal=function(b,c){if(angular.isUndefined(c.modalOptions)||angular.isUndefined(c.modalOptions.templateUrl))throw"createModal requires at least modalOptions.templateUrl to be defined";var d={name:b,options:c};a[b]=function(c,e,f,g){if(angular.isUndefined(c))throw"GlobalPupupService."+b+" must be called with a message";return a.displayModal(d,c,e,f,g)}},this.createToast=function(b,c){if(angular.isUndefined(c.templateUrl))throw"createToast requires templateUrl to be defined";var d={name:b,options:c};a[b]=function(c){if(angular.isUndefined(c))throw"GlobalPupupService."+b+" must be called with a message";a.displayToast(d,c)}},this.createFileModal=function(b,c){if(angular.isUndefined(c.modalOptions)||angular.isUndefined(c.modalOptions.templateUrl))throw"createFileModal requires at least modalOptions.templateUrl to be defined";var d={name:b,options:c};a[b]=function(c,e,f){if(angular.isUndefined(c))throw"GlobalPopupService."+b+" must be called with a valid url";a.displayFileModal(d,c,e,f)}}}).config(["GlobalPopupsProvider",function(a){a.createToast("successToast",{templateUrl:"templates/successToast.html",displayDuration:7e3}),a.createToast("warningToast",{templateUrl:"templates/warningToast.html",displayDuration:7e3}),a.createModal("infoDialog",{modalOptions:{templateUrl:"templates/infoModal.html",windowClass:"modal-info",backdrop:!1,keyboard:!0}}),a.createModal("yesnoDialog",{modalOptions:{templateUrl:"templates/yesnoModal.html",windowClass:"modal-yesno",backdrop:"static",keyboard:!1}}),a.createFileModal("fileDialog",{modalOptions:{templateUrl:"templates/fileModal.html",windowClass:"modal-file",keyboard:!0}}),a.createModal("errorDialog",{modalOptions:{templateUrl:"templates/errorModal.html",windowClass:"modal-error",backdrop:"static",keyboard:!1}}),a.createModal("warningDialog",{modalOptions:{templateUrl:"templates/warningModal.html",windowClass:"modal-warning",keyboard:!0}})}]),angular.module("twigs.menu").provider("Menu",function(){function a(a){if(angular.isUndefined(a)||a.length<1)return a;if(b(a))return a;if("/"!==a.charAt(0))throw"please use routes in menu configuration: "+a;return a}function b(a){return"http"===a.substring(0,4)}function c(a){this.name=a}function d(a,b){this.constructor(a),this.templateUrl=b,this.items=[]}function e(b,c){this.constructor(b),this.items=[];var d=c||{};this.text=d.text||b,this.link=a(d.link),this.options=d}var f,g={},h={createMenu:function(a,b){var c=new d(a,b);if(angular.isDefined(g[a]))throw"Menu is already defined: "+a;return g[a]=c,c},menu:function(a){return g[a]},removeMenu:function(a){delete g[a]},getUserLoadedEventName:function(){return f},setUserLoadedEventName:function(a){f=a}};this.$get=function(){return h},this.createMenu=function(a,b){return h.createMenu(a,b)},this.menu=function(a){return h.menu(a)},this.removeMenu=function(a){h.removeMenu(a)},this.setUserLoadedEventName=function(a){h.setUserLoadedEventName(a)},d.prototype=new c(name),e.prototype=new c(name),c.prototype.addItem=function(a,b){return this._createAndAddItem(a,b),this},c.prototype.createSubMenu=function(a,b){return this._createAndAddItem(a,b)},c.prototype._createAndAddItem=function(a,b){var c=new e(a,b);return this.items.push(c),c}}).service("MenuPermissionService",["$route","$injector","$log",function(a,b,c){var d,e,f,g;try{g=b.get("Permissions")}catch(h){c.debug("twigs.menu is used without permission filtering. Include twigs.security in your app if you wish to filter twigs.menu according to user roles.")}return d=function(b,c){var d=!0,e=a.routes[b.link];return angular.isUndefined(e)?!0:(angular.forEach(e.neededRoles,function(a){var b=c.hasRole(a);return b?void 0:(d=!1,!1)}),d)},f=function(a,b){if(angular.isDefined(a.items)&&a.items.length>0){var c=[];angular.forEach(a.items,function(a){if(d(a,b)){var e=a.items.length,g=f(a,b);(0!==g.items.length||0===e)&&c.push(a)}}),a.items=c}return a},e=function(a){if(angular.isUndefined(g))return a;if(!angular.isUndefined(a))return f(a,g)},{isSubMenuItemAllowed:d,filterMenuForRouteRestrictions:e}}]).directive("twgMenu",["$rootScope","$location","$log","Menu","MenuPermissionService",function(a,b,c,d,e){return{restrict:"E",link:function(f,g,h){function i(a,b){var c;return angular.isDefined(b.items)&&b.items.length>0?(angular.forEach(b.items,function(b){return b.active=!1,i(a,b)===!0?(c=!0,b.active=!0,!1):void 0}),b.active=c,c===!1&&(b.active=b.link===a),void 0):b.link===a}var j=angular.copy(d.menu(h.menuName));f.menu=e.filterMenuForRouteRestrictions(j),angular.isDefined(d.getUserLoadedEventName())?f.$on(d.getUserLoadedEventName(),function(){var a=angular.copy(d.menu(h.menuName));f.menu=e.filterMenuForRouteRestrictions(a)}):c.debug("twigs.menu has no user initialized event registered. This may cause problems when using twigs.menu permission filtering"),i(b.path(),f.menu),a.$on("$routeChangeSuccess",function(){i(b.path(),f.menu)})},templateUrl:function(a,b){return d.menu(b.menuName).templateUrl}}}]),angular.module("twigs.protectedRoutes").provider("ProtectedRoute",["$routeProvider",function(a){function b(a){if(angular.isDefined(a.neededRoles)){if("object"==typeof a.neededRoles)return!0;throw"Invalid protected route config: neededRoles must be an array"}return angular.isDefined(a.authenticated)?a.authenticated===!0:!1}function c(a,b,c){var e=a.defer();return b.getUser().then(function(){d(c,b)?e.resolve({}):e.reject(new Error("missing_roles"))},function(a){e.reject(a)}),e.promise}function d(a,b){var c=!0;return angular.forEach(a,function(a){c&&(b.hasRole(a)||(c=!1))}),c}var e={};this.otherwise=a.otherwise,this.when=function(d,f){return b(f)&&(f.resolve=angular.extend(f.resolve||{},{CurrentUser:function(a){return a.getUser()},hasPermission:function(a,b){return c(a,b,f.neededRoles)}}),e[d]=f.neededRoles),a.when(d,f),this},this.$get=function(){return{}}}]),angular.module("twigs.security").service("UserObjectSanityChecker",function(){function a(a){if(angular.isUndefined(a))return!1;var c=!0;return b.forEach(function(b){angular.isUndefined(a[b])&&(c=!1)}),c}var b=["username","roles","permissions"];return{isSane:a}}).provider("Permissions",function(){var a,b,c,d={};this.registerUserLoader=function(b){a=b},this.registerPermissionEvaluationFunction=function(a){b=a},this.$get=["$rootScope","$q","$injector","UserObjectSanityChecker",function(e,f,g,h){function i(){if(!m())return!1;var a=g.invoke(b);return a(d.permissions,arguments)}function j(a){if(!m())return!1;var b=!1;return d.roles.forEach(function(c){c===a&&(b=!0)}),b}function k(){if(angular.isUndefined(a))throw"No userLoader defined! Call PermissionsProvider.registerUserLoader(fn)  first!";var b=f.defer(),c=g.invoke(a);return c().then(function(a){h.isSane(a)?(d=a,b.resolve(a)):(console.error("Loaded user object did not pass sanity check!"),b.reject(new Error("Loaded user object did not pass sanity check!")))},function(){b.reject()}),b.promise}function l(){var a=f.defer();return angular.isDefined(d.username)?a.resolve(d):angular.isUndefined(c)&&(k().then(function(){e.$broadcast("userInitialized"),a.resolve(d)},function(b){a.reject(b)}),c=a.promise),c}function m(){return angular.isDefined(d.username)}function n(){d={},c=void 0,e.$broadcast("userCleared")}return{getUser:l,clearSecurityContext:n,hasPermission:i,hasRole:j,isAuthenticated:m}}]}).service("ExpressionEvaluator",["Permissions",function(Permissions){function _throwIfInvalidExpression(a){var b="Invalid permission expression";if(angular.isUndefined(a)||a.length<1)throw b;var c=!1;if(VALID_EXPRESSION_PATTERNS.forEach(function(b){c||b.test(a)&&(c=!0)}),c!==!0)throw b}function _evaluate(expression){return _throwIfInvalidExpression(expression),eval("Permissions."+expression)}if(angular.isUndefined(Permissions))throw"We need Permissions Service for evaluating!";var VALID_EXPRESSION_PATTERNS=[/hasPermission\(.*\)/,/hasRole\(.*\)/,/isAuthenticated\(\)/];return{evaluate:_evaluate}}]).directive("twgSecureShow",["ExpressionEvaluator","$animate",function(a,b){return{restrict:"A",scope:!0,link:function(c,d,e){c.$on("userInitialized",function(){f()}),c.$on("userCleared",function(){f()});var f=function(){var c=a.evaluate(e.twgSecureShow);b[c?"removeClass":"addClass"](d,"ng-hide")};f()}}}]).directive("twgSecureEnabled",["ExpressionEvaluator",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){b.$on("userInitialized",function(){e()}),b.$on("userCleared",function(){e()});var e=function(){var b=a.evaluate(d.twgSecureEnabled);c.attr("disabled",!b)};e()}}}]),angular.module("twigs.sortable").directive("twgSortable",function(){var a="column-sort-asc",b="column-sort-desc",c="column-sort-none";return{restrict:"A",link:function(d,e,f){var g,h=f.twgSortable;g=function(e){return d.orderPropertyName===e?d.orderProp?b:a:c},e.bind("click",function(){d.orderPropertyName===h?d.orderProp=!d.orderProp:(d.orderPropertyName=h,d.orderProp=!1),e.removeClass(b),e.removeClass(a),e.removeClass(c),e.addClass(g(h)),d.$$phase||d.$digest()}),d.$watch("orderPropertyName",function(d,f){h===f&&(e.removeClass(a),e.removeClass(b),e.hasClass(c)||e.addClass(c))}),e.addClass(c)}}}),angular.module("twigs.tableRowClick").directive("twgTableRowClick",["$location","ExpressionEvaluator",function(a,b){return{restrict:"A",link:function(c,d,e){function f(){var a=e.twgTableRowClickSecure;return angular.isUndefined(a)||""===a?!0:b.evaluate(a)}function g(a){var b=$(a);if(angular.isDefined(b.attr("ng-click"))||angular.isDefined(b.attr("x-ng-click")))return!0;var c=b.closest("[ng-click],[x-ng-click]");return c.length>0?!0:!1}d.addClass("tablerow-clickable");var h=e.twgTableRowClick;d.on("click",function(b){f()&&!g(b.target)&&c.$apply(function(){a.path(h)})})}}}]),angular.module("twigs.templates").run(["$templateCache",function(a){a.put("templates/chooseMultiple.html",'<select multiple="true" ui-select2="select2Options">\r\n    <option value="{{choice.id}}" ng-repeat="choice in choices">{{getLabel(choice)}}</option>\r\n</select>'),a.put("templates/chooseSingle.html",'<select ui-select2="select2Options">\r\n    <option value="{{choice.id}}" ng-repeat="choice in choices">{{getLabel(choice)}}</option>\r\n</select>\r\n\r\n'),a.put("templates/errorModal.html",'<div class="modal-header">\r\n    <button type="button" class="close" x-ng-click="$close()" aria-hidden="true">&times;</button>\r\n    <h3><i class="glyphicon glyphicon-exclamation-sign"></i>{{title}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <p>{{message}}</p>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" x-ng-click="$close()">{{primaryButtonText}}</button>\r\n</div>'),a.put("templates/fileModal.html",'<div class="modal-header">\r\n    <h3>{{title}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <iframe id="modal-fileframe" x-ng-src="{{message}}"></iframe>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" x-ng-click="$close()">{{backButtonText}}</button>\r\n</div>'),a.put("templates/infoModal.html",'<div class="modal-header">\r\n    <button type="button" class="close" x-ng-click="$close()">&times;</button>\r\n    <h3><i class="glyphicon glyphicon-info-sign"></i>{{title}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <p>{{message}}</p>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" x-ng-click="$close()">{{primaryButtonText}}</button>\r\n</div>'),a.put("templates/successToast.html",'<!-- for success messages, centered on top of browser window (aka "Toast")-->\r\n<div class="alert alert-success fade-in" x-ng-click="close()">\r\n    <button type="button" class="close" x-ng-click="close()">&times;</button>\r\n    <div id="successMessage"> <i class="pull-left glyphicon glyphicon-check"></i>\r\n        <div style="margin-left: 25px;">{{message}}</div>\r\n    </div>\r\n</div>\r\n'),a.put("templates/warningModal.html",'<div class="modal-header">\r\n    <button type="button" class="close" x-ng-click="$close()" aria-hidden="true">&times;</button>\r\n    <h3><i class="glyphicon glyphicon-exclamation-sign"></i>{{title}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <p><translate>{{message}}</translate></p>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" x-ng-click="$close()">{{primaryButtonText}}</button>\r\n</div>'),a.put("templates/warningToast.html",'<!-- for success messages, centered on top of browser window (aka "Toast")-->\r\n<div class="alert alert-warning fade-in" x-ng-click="close()">\r\n    <button type="button" class="close" x-ng-click="close()">&times;</button>\r\n    <div id="successMessage"> <i class="pull-left glyphicon glyphicon-check"></i>\r\n        <div style="margin-left: 25px;">{{message}}</div>\r\n    </div>\r\n</div>\r\n'),a.put("templates/yesnoModal.html",'<div class="modal-header">\r\n    <h3>{{title}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <p>{{message}}</p>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-danger" x-ng-click="$close(false)">{{primaryButtonText}}</button>\r\n    <button class="btn btn-yes {{message.yesButtonCls}} btn-success" x-ng-click="$close(true)">{{secondaryButtonText}}</button>\r\n</div>')}]);